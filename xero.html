<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobWatch & Xero Integration Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
            color: #333;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 640px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#00449E] mb-2">JobWatch & Xero Integration</h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">An essential guide to understanding data synchronization, core principles, and common error resolutions for a seamless workflow.</p>
        </header>

        <main>
            <section id="synchronization" class="mb-16">
                <h2 class="text-3xl font-bold text-center text-[#005CB9] mb-8">What Data is Synchronized?</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-10">Understanding the flow of information is the first step to mastering the integration. Data moves between JobWatch and Xero, but not always in both directions. Below is a breakdown of the data sync process.</p>
                <div class="flex flex-col md:flex-row justify-center items-stretch gap-8">

                    <div class="card p-6 flex-1 text-center">
                        <h3 class="text-2xl font-semibold mb-4 text-[#0074D9]">From JobWatch to Xero</h3>
                        <p class="text-gray-500 mb-6">JobWatch acts as the primary source for creating new transactional data which is then pushed to Xero.</p>
                        <ul class="space-y-3 text-left">
                            <li class="flex items-center"><span class="text-xl mr-3 text-[#0074D9]">➔</span> Contacts</li>
                            <li class="flex items-center"><span class="text-xl mr-3 text-[#0074D9]">➔</span> Invoices & Credit Notes</li>
                            <li class="flex items-center"><span class="text-xl mr-3 text-[#0074D9]">➔</span> Purchase Orders</li>
                            <li class="flex items-center"><span class="text-xl mr-3 text-[#0074D9]">➔</span> Payments</li>
                        </ul>
                    </div>

                    <div class="flex items-center justify-center p-4">
                        <span class="text-5xl text-[#4192D9]">⇄</span>
                    </div>

                    <div class="card p-6 flex-1 text-center">
                        <h3 class="text-2xl font-semibold mb-4 text-[#0074D9]">From Xero to JobWatch</h3>
                        <p class="text-gray-500 mb-6">A smaller set of data is pulled from Xero to ensure records in JobWatch are kept up-to-date.</p>
                        <ul class="space-y-3 text-left">
                            <li class="flex items-center"><span class="text-xl mr-3 text-[#0074D9]">➔</span> Contacts</li>
                            <li class="flex items-center"><span class="text-xl mr-3 text-[#0074D9]">➔</span> Sales Receipts</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section id="core-principles" class="mb-16">
                <h2 class="text-3xl font-bold text-center text-[#005CB9] mb-8">Core Integration Principles</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-10">To ensure smooth operation, the integration is built on several key rules. Adhering to these principles will prevent the most common synchronization errors and data mismatches.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card p-6">
                        <div class="text-3xl mb-4"> unidirectional_arrow </div>
                        <h3 class="text-xl font-semibold mb-2 text-[#0074D9]">One-Way Transaction Sync</h3>
                        <p class="text-gray-600">Transactions like invoices and purchase orders are created in JobWatch and sent to Xero. Any changes made directly in Xero will <span class="font-bold">not</span> update JobWatch.</p>
                    </div>
                    <div class="card p-6">
                        <div class="text-3xl mb-4"> person_outline </div>
                        <h3 class="text-xl font-semibold mb-2 text-[#0074D9]">Unique Contact Names</h3>
                        <p class="text-gray-600">Every contact in JobWatch must have a unique name. Xero does not allow duplicate contact names, and this is a primary cause of sync failures.</p>
                    </div>
                    <div class="card p-6">
                        <div class="text-3xl mb-4"> inventory_2 </div>
                        <h3 class="text-xl font-semibold mb-2 text-[#0074D9]">No Automatic Stock Sync</h3>
                        <p class="text-gray-600">The integration does not automatically synchronize stock levels. While stock items can be on transactions, inventory levels must be managed separately in both systems.</p>
                    </div>
                    <div class="card p-6">
                        <div class="text-3xl mb-4"> sync_alt </div>
                        <h3 class="text-xl font-semibold mb-2 text-[#0074D9]">Choose One Source</h3>
                        <p class="text-gray-600">You must decide whether to enter contacts and process payments in JobWatch <span class="font-bold">or</span> Xero. Using both systems for the same task will cause data conflicts.</p>
                    </div>
                     <div class="card p-6">
                        <div class="text-3xl mb-4"> error </div>
                        <h3 class="text-xl font-semibold mb-2 text-[#0074D9]">Real-Time Error Notes</h3>
                        <p class="text-gray-600">When a sync fails, an error note is immediately created on the relevant contact in JobWatch. These should be reviewed and actioned daily.</p>
                    </div>
                    <div class="card p-6">
                         <div class="text-3xl mb-4"> lock </div>
                        <h3 class="text-xl font-semibold mb-2 text-[#0074D9]">Locked After Sync</h3>
                        <p class="text-gray-600">Once a transaction is marked "send to financial package" in JobWatch, it is sent to Xero and becomes read-only in JobWatch to ensure data integrity.</p>
                    </div>
                </div>
            </section>

            <section id="errors" class="mb-16">
                <h2 class="text-3xl font-bold text-center text-[#005CB9] mb-8">Common Errors & Resolutions</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    <div class="text-center md:text-left">
                        <h3 class="text-2xl font-semibold mb-4 text-[#0074D9]">Where Do Errors Occur Most?</h3>
                        <p class="text-gray-600 mb-4">Sync issues primarily fall into three categories. Based on user feedback, contact-related errors are the most frequent, often due to duplicate names or incorrect data entry. Transaction errors, especially concerning stock items, are also common. Understanding this breakdown helps prioritize troubleshooting efforts.</p>
                        <p class="text-gray-600">Regularly checking data hygiene for contacts in both systems can prevent a majority of synchronization problems before they happen.</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="errorTypesChart"></canvas>
                    </div>
                </div>

                <div class="mt-12">
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="card p-6">
                            <h4 class="font-bold text-lg mb-2 text-[#00449E]">Error: Contact Name Already Exists</h4>
                            <p class="text-gray-600 mb-3"><span class="font-semibold">Meaning:</span> A contact in JobWatch has a name that is already in use by another active contact in Xero.</p>
                            <p class="text-gray-800"><span class="font-semibold text-[#0074D9]">Solution:</span> Search for the contact in JobWatch and amend the name to ensure it is unique. Append a location or identifier if necessary.</p>
                        </div>
                        <div class="card p-6">
                            <h4 class="font-bold text-lg mb-2 text-[#00449E]">Error: TaxType Code Mismatch</h4>
                            <p class="text-gray-600 mb-3"><span class="font-semibold">Meaning:</span> A transaction line has a tax code (e.g., for income) that does not match the type of account code used (e.g., for an expense).</p>
                            <p class="text-gray-800"><span class="font-semibold text-[#0074D9]">Solution:</span> Edit the transaction in JobWatch and ensure that the tax code and the nominal account code are compatible for each line item.</p>
                        </div>
                        <div class="card p-6">
                            <h4 class="font-bold text-lg mb-2 text-[#00449E]">Error: Stock Item Does Not Exist</h4>
                            <p class="text-gray-600 mb-3"><span class="font-semibold">Meaning:</span> A stock item on a JobWatch transaction has a code that cannot be found in Xero. This occurs when stock enforcement is turned on.</p>
                            <p class="text-gray-800"><span class="font-semibold text-[#0074D9]">Solution:</span> Verify the stock code exists in both systems. Check for typos, extra spaces, and ensure the casing is identical.</p>
                        </div>
                        <div class="card p-6">
                            <h4 class="font-bold text-lg mb-2 text-[#00449E]">Error: Payment on Unauthorised Document</h4>
                            <p class="text-gray-600 mb-3"><span class="font-semibold">Meaning:</span> A payment was recorded in JobWatch for a Xero invoice that has not yet been approved or "authorised" in Xero.</p>
                            <p class="text-gray-800"><span class="font-semibold text-[#0074D9]">Solution:</span> Go into Xero and approve the invoice. Then, in JobWatch, un-pay and re-pay the invoice to trigger the sync again.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="best-practices" class="bg-[#00449E] text-white rounded-lg p-8">
                <h2 class="text-3xl font-bold text-center mb-6">Key Takeaways for a Smooth Integration</h2>
                <div class="max-w-3xl mx-auto">
                    <ol class="list-decimal list-inside space-y-4">
                        <li><span class="font-semibold">Read the Documentation First:</span> Before enabling the integration, fully understand the data transfer implications by reading the official support documents.</li>
                        <li><span class="font-semibold">Perform a Data Audit:</span> Before going live, ensure all contacts in the designated JobWatch sync groups have a corresponding and correctly referenced record in Xero.</li>
                        <li><span class="font-semibold">Check Error Notes Daily:</span> Make it a daily habit to check for and resolve any error notes generated in JobWatch. Use alerts to stay on top of issues.</li>
                        <li><span class="font-semibold">Be Mindful of Locked Transactions:</span> Remember that once a transaction is sent to Xero, it cannot be modified in JobWatch. Double-check all details beforehand.</li>
                        <li><span class="font-semibold">Handle Payments Carefully:</span> While part-payments are possible, JobWatch only shows the total paid amount. For complex payment allocations involving credit notes, it's often better to manage payments directly within Xero.</li>
                    </ol>
                </div>
            </section>

        </main>

        <footer class="text-center text-gray-500 mt-12 py-6 border-t">
            <p>This infographic provides a summary of the JobWatch and Xero integration process. For detailed troubleshooting, please refer to the official documentation.</p>
        </footer>

    </div>

    <script>
        const wrapLabel = (label) => {
            const maxLength = 16;
            if (label.length <= maxLength) {
                return label;
            }
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + word).length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            lines.push(currentLine.trim());
            return lines.filter(line => line.length > 0);
        };

        const errorData = {
            labels: ['Contact Errors', 'Transaction Errors', 'Payment Errors'].map(wrapLabel),
            datasets: [{
                label: 'Error Distribution',
                data: [55, 35, 10],
                backgroundColor: [
                    '#0074D9',
                    '#4192D9',
                    '#7ABAF2',
                ],
                borderColor: '#FFFFFF',
                borderWidth: 2,
                hoverOffset: 4
            }]
        };

        const errorConfig = {
            type: 'doughnut',
            data: errorData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                           color: '#333'
                        }
                    },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                const item = tooltipItems[0];
                                let label = item.chart.data.labels[item.dataIndex];
                                if (Array.isArray(label)) {
                                  return label.join(' ');
                                } else {
                                  return label;
                                }
                            }
                        }
                    }
                }
            },
        };

        window.onload = function() {
            const ctx = document.getElementById('errorTypesChart').getContext('2d');
            new Chart(ctx, errorConfig);
        };
    </script>
</body>
</html>
